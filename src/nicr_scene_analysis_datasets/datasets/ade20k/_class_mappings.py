# -*- coding: utf-8 -*-
"""
.. codeauthor:: Daniel Seichter <daniel.seichter@tu-ilmenau.de>

Mapping tables to convert semantic classes in ADE20K.

Based on:
    - [1] https://github.com/CSAILVision/sceneparsing/blob/master/convertFromADE/mapFromADE.txt
    - [2] https://github.com/CSAILVision/ADE20K/blob/main/utils/ade20k_instance_catid_mapping.txt
"""

# -----------------------------------------------------------------------------
# mapping from 2021 full ADE20K to 150 classes used in 2016 scene parsing
# challenge (from [1])
MAPPING_FULL_ADE20K_TO_SCENE_PARSE_150 = {
    2978: 1,
    312: 2,
    2420: 3,
    976: 4,
    2855: 5,
    447: 6,
    2131: 7,
    165: 8,
    3055: 9,
    1125: 10,
    350: 11,
    2377: 12,
    1831: 13,
    838: 14,
    774: 15,
    783: 15,
    2684: 16,
    1610: 17,
    1910: 18,
    687: 19,
    471: 20,
    401: 21,
    2994: 22,
    1735: 23,
    2473: 24,
    2329: 25,
    1276: 26,
    2264: 27,
    1564: 28,
    2178: 29,
    913: 30,
    57: 31,
    2272: 32,
    907: 33,
    724: 34,
    2138: 35,
    2985: 36,
    533: 36,
    1395: 37,
    155: 38,
    2053: 39,
    689: 40,
    137: 41,
    266: 42,
    581: 43,
    2380: 44,
    491: 45,
    627: 46,
    2212: 47,
    2388: 48,
    2423: 49,
    943: 50,
    2096: 51,
    1121: 52,
    1788: 53,
    2530: 54,
    2185: 55,
    420: 56,
    1948: 57,
    1869: 58,
    2251: 59,
    2531: 60,
    2128: 61,
    294: 62,
    239: 63,
    212: 64,
    571: 65,
    2793: 66,
    978: 67,
    236: 68,
    1240: 69,
    181: 70,
    629: 71,
    2598: 72,
    1744: 73,
    1374: 74,
    591: 75,
    2679: 76,
    223: 77,
    123: 78,
    47: 79,
    1282: 80,
    327: 81,
    2821: 82,
    1451: 83,
    2880: 84,
    2828: 85,
    480: 86,
    77: 87,
    2616: 88,
    246: 89,
    247: 89,
    2733: 90,
    14: 91,
    738: 92,
    38: 93,
    1936: 94,
    1401: 95,
    120: 96,
    868: 97,
    1702: 98,
    249: 99,
    308: 100,
    1969: 101,
    2526: 102,
    2928: 103,
    2337: 104,
    1023: 105,
    609: 106,
    389: 107,
    2989: 108,
    1930: 109,
    2668: 110,
    2586: 111,
    131: 112,
    146: 113,
    3016: 114,
    2739: 115,
    95: 116,
    1563: 117,
    642: 118,
    1708: 119,
    103: 120,
    1002: 121,
    2569: 122,
    2704: 123,
    2833: 124,
    1551: 125,
    1981: 126,
    29: 127,
    187: 128,
    1393: 129,
    747: 130,
    2254: 131,
    206: 132,
    2262: 133,
    1260: 134,
    2243: 135,
    2932: 136,
    2836: 137,
    2850: 138,
    64: 139,
    894: 140,
    1858: 141,
    3109: 142,
    1919: 143,
    1583: 144,
    318: 145,
    2356: 146,
    2046: 147,
    1098: 148,
    530: 149,
    954: 150
}
# double mapping for 15, 36, and 89, thus, vice versa is not possible
assert len(MAPPING_FULL_ADE20K_TO_SCENE_PARSE_150) == 153

# -----------------------------------------------------------------------------
# mapping from 2021 full ADE20K to 100 classes used in the instance part of the
# 2017 places challenge (from [2])
MAPPING_FULL_ADE20K_TO_INSTANCE_100 = {
    165: 1,
    3055: 2,
    350: 3,
    1831: 4,
    774: 5,
    783: 5,
    2684: 6,
    687: 7,
    471: 8,
    401: 9,
    1735: 10,
    2473: 11,
    2329: 12,
    1564: 13,
    57: 14,
    2272: 15,
    907: 16,
    724: 17,
    2985: 18,
    533: 18,
    1395: 19,
    155: 20,
    2053: 21,
    689: 22,
    266: 23,
    581: 24,
    2380: 25,
    491: 26,
    627: 27,
    2388: 28,
    943: 29,
    2096: 30,
    2530: 31,
    420: 32,
    1948: 33,
    1869: 34,
    2251: 35,
    239: 36,
    571: 37,
    2793: 38,
    978: 39,
    236: 40,
    181: 41,
    629: 42,
    2598: 43,
    1744: 44,
    1374: 45,
    591: 46,
    2679: 47,
    223: 48,
    47: 49,
    327: 50,
    2821: 51,
    1451: 52,
    2880: 53,
    480: 54,
    77: 55,
    2616: 56,
    246: 57,
    247: 57,
    2733: 58,
    14: 59,
    38: 60,
    1936: 61,
    120: 62,
    1702: 63,
    249: 64,
    2928: 65,
    2337: 66,
    1023: 67,
    2989: 68,
    1930: 69,
    2586: 70,
    131: 71,
    146: 72,
    95: 73,
    1563: 74,
    1708: 75,
    103: 76,
    1002: 77,
    2569: 78,
    2833: 79,
    1551: 80,
    1981: 81,
    29: 82,
    187: 83,
    747: 84,
    2254: 85,
    2262: 86,
    1260: 87,
    2243: 88,
    2932: 89,
    2836: 90,
    2850: 91,
    64: 92,
    894: 93,
    1919: 94,
    1583: 95,
    318: 96,
    2046: 97,
    1098: 98,
    530: 99,
    954: 100
}
# double mapping for 5, 18, and 57, thus, vice versa is not possible
assert len(MAPPING_FULL_ADE20K_TO_INSTANCE_100) == 103

# -----------------------------------------------------------------------------
# mapping from 150 classes used in 2016 scene parsing challenge to 100 classes
# used in the instance part of the 2017 places challenge and vice versa
# (from [2])
MAPPING_SCENE_PARSE_150_TO_INSTANCE_100 = {
    MAPPING_FULL_ADE20K_TO_SCENE_PARSE_150[k]: v
    for k, v in MAPPING_FULL_ADE20K_TO_INSTANCE_100.items()
}

# no multiple mappings, as the 100 classes are a subset of the 150 classes
assert len(MAPPING_SCENE_PARSE_150_TO_INSTANCE_100) == 100

# vice versa
MAPPING_INSTANCE_100_TO_SCENE_PARSE_150 = {
    v: k
    for k, v in MAPPING_SCENE_PARSE_150_TO_INSTANCE_100.items()
}
